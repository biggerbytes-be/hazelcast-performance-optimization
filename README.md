#Externalizer4J support for Hazelcast
Hazelcast provides its own serialization API to maximize performance. Through the use of 
the com.hazelcast.nio.serialization.DataSerializable interface you can
implement your own serialization logic for maximum efficiency.
  
The Externalizer4J support for Hazelcast means it generates the DataSerializable implementation 
for each of your Serializable classes. 
Externalizer4J generates fully compliant serialization methods 
for your classes using the best Hazelcast API calls. Compile your code as usual and after compilation 
Externalizer4J will analyze you classes and generated extra bytecode for your classes. This 
way you benefit from the best Hazelcast performance without writing any code! 
 
## Clone this project and try for yourself

Want to see how this works just get this project. Do a *maven package* and run the benchmark with:

`java -jar target/microbenchmarks.jar` 
 
Alternatively use run.sh ()depending on your OS) 
to run the JMH microbenchmarks. See of the performance changes depending on the different classes and 
the optimizations used.

Then take you favorite decompiler and take a look a the class files. See for yourself what kind of
code has been generated by Externalizer4J. And while you're there look for .java code for these 
classes. You'll see __there is none__! Externalizer4J uses bytecode analysis and bytecode 
generation from beginning to end.

## Benchmarks
There are 3 sets of benchmarks. The benchmarks all do the same i.e. measure the serialization and
deserialization speed for a number of classes. 

1. The classes found under the *reference* package offer 
the baseline. These are plain Serializable classes with varying aspects: number of fields, 
class hierachy as well as the type of the fields. The classes in *reference* package are __not__ 
optimized by Externalizer4J.

2. The classes found in the *automatic* and *annotated* package get optimized by Externalizer4J. These 
classes are the same as those found in the *reference* package. We copied them to illustrate the 
different optimizations options. As the name suggest the class in the *automatic* package get optimized 
automatically by Externalizer4J.

3. The classes found in the *annotated* package get optimized even further through the use of, 
yes you guessed it, annotations. The optimization is still performed automatically by 
Externalizer4J. But here information about the *nullness* and *uniquess* of fields is used by
Externalizer4J to generated even more optimized logic.

## Resources

[Short introduction video](https://www.youtube.com/watch?v=qlo_FGLagPg)

[Blog post shared by Hazelcast](https://blog.hazelcast.com/hazelcast-serialization-performance/)

[Visit http://www.externalizer4j.com/ for more information](http://www.externalizer4j.com/)

### Results

```
# Run complete. Total time: 01:14:31

Benchmark                                                                     Mode  Cnt       Score       Error  Units
b.b.d.e.h.annotated.AnnotatedBenchmark.writeArraysSerializable               thrpt   25     682.458 ±   242.174  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeChildChildSerializable           thrpt   25    4854.725 ±   467.133  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeChildSerializable                thrpt   25    5831.640 ±   435.942  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeCollectionSerializable           thrpt   25  824570.290 ± 33447.384  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled     thrpt   25  841464.762 ±  8424.157  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled1    thrpt   25  737324.680 ± 20389.375  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled10   thrpt   25  373300.497 ±  7392.791  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled100  thrpt   25   64528.979 ±  1009.173  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled500  thrpt   25   13210.796 ±   108.687  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeField15Serializable              thrpt   25    1558.764 ±    35.000  ops/s
b.b.d.e.h.annotated.AnnotatedBenchmark.writeParentDataSerializable           thrpt   25    6997.508 ±   163.766  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeArraysSerializable               thrpt   25    1212.141 ±   129.849  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeChildChildSerializable           thrpt   25    3969.967 ±   108.601  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeChildSerializable                thrpt   25    4653.852 ±    68.602  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeCollectionSerializable           thrpt   25  805605.647 ± 14382.525  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeCollectionSerializableFilled     thrpt   25  800602.083 ± 16460.810  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeCollectionSerializableFilled1    thrpt   25  684470.333 ± 22348.350  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeCollectionSerializableFilled10   thrpt   25  350472.513 ±  4847.861  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeCollectionSerializableFilled100  thrpt   25   37975.167 ±  1043.754  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeCollectionSerializableFilled500  thrpt   25    8739.551 ±   399.932  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeField15Serializable              thrpt   25    1602.841 ±    37.230  ops/s
b.b.d.e.h.automatic.AutomaticBenchmark.writeParentDataSerializable           thrpt   25    6029.911 ±    67.268  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeArraysSerializable               thrpt   25     503.854 ±     9.742  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeChildChildSerializable           thrpt   25     267.590 ±     5.838  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeChildSerializable                thrpt   25     366.426 ±     5.543  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeCollectionSerializable           thrpt   25   62858.582 ±   542.976  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeCollectionSerializableFilled     thrpt   25   61761.450 ±   528.767  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeCollectionSerializableFilled1    thrpt   25   43775.453 ±   340.780  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeCollectionSerializableFilled10   thrpt   25   32653.618 ±   597.544  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeCollectionSerializableFilled100  thrpt   25   10287.647 ±    87.749  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeCollectionSerializableFilled500  thrpt   25    2572.487 ±    35.009  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeField15Serializable              thrpt   25     267.893 ±     2.034  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeParentDataSerializable           thrpt   25     549.811 ±     2.763  ops/s
b.b.d.e.h.reference.ReferenceBenchmark.writeSelfReferencing                  thrpt   25   70024.324 ±   488.725  ops/s

Benchmark                                                                     Mode  Cnt          Score          Error  Units
hazelcast.annotated.AnnotatedBenchmark.arraysSerializable                    thrpt   30       2754.909 ±      816.210  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeArraysSerializable               thrpt   30       2028.326 ±      296.059  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeChildChildSerializable           thrpt   30       9311.299 ±      782.585  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeChildSerializable                thrpt   30      12093.823 ±      415.250  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeCollectionSerializable           thrpt   30     232043.446 ±    49739.150  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled     thrpt   30     252564.161 ±    47833.679  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled1    thrpt   30     185987.983 ±    32991.847  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled10   thrpt   30     137375.492 ±    16129.249  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled100  thrpt   30      27593.958 ±     1451.217  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeCollectionSerializableFilled500  thrpt   30       5994.946 ±      127.097  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeField15Serializable              thrpt   30       3473.661 ±      150.853  ops/s
hazelcast.annotated.AnnotatedBenchmark.writeParentDataSerializable           thrpt   30      14761.643 ±      854.670  ops/s
hazelcast.automatic.AutomaticBenchmark.arraysSerializable                    thrpt   30       4222.628 ±       54.875  ops/s
hazelcast.automatic.AutomaticBenchmark.writeArraysSerializable               thrpt   30       2487.784 ±       19.616  ops/s
hazelcast.automatic.AutomaticBenchmark.writeChildChildSerializable           thrpt   30       8460.667 ±      312.637  ops/s
hazelcast.automatic.AutomaticBenchmark.writeChildSerializable                thrpt   30      10012.441 ±      309.224  ops/s
hazelcast.automatic.AutomaticBenchmark.writeCollectionSerializable           thrpt   30     250764.991 ±    53039.254  ops/s
hazelcast.automatic.AutomaticBenchmark.writeCollectionSerializableFilled     thrpt   30     243005.895 ±    45610.972  ops/s
hazelcast.automatic.AutomaticBenchmark.writeCollectionSerializableFilled1    thrpt   30     158486.606 ±    18760.761  ops/s
hazelcast.automatic.AutomaticBenchmark.writeCollectionSerializableFilled10   thrpt   30      64572.474 ±     4357.989  ops/s
hazelcast.automatic.AutomaticBenchmark.writeCollectionSerializableFilled100  thrpt   30       8807.647 ±      169.463  ops/s
hazelcast.automatic.AutomaticBenchmark.writeCollectionSerializableFilled500  thrpt   30       1796.506 ±       11.900  ops/s
hazelcast.automatic.AutomaticBenchmark.writeField15Serializable              thrpt   30       3623.691 ±       35.736  ops/s
hazelcast.automatic.AutomaticBenchmark.writeParentDataSerializable           thrpt   30      12376.743 ±      402.851  ops/s
hazelcast.reference.ReferenceBenchmark.arraysSerializable                    thrpt   30       4774.757 ±       30.342  ops/s
hazelcast.reference.ReferenceBenchmark.writeArraysSerializable               thrpt   30       1428.779 ±       17.306  ops/s
hazelcast.reference.ReferenceBenchmark.writeChildChildSerializable           thrpt   30        755.792 ±        9.534  ops/s
hazelcast.reference.ReferenceBenchmark.writeChildSerializable                thrpt   30       1066.166 ±       18.052  ops/s
hazelcast.reference.ReferenceBenchmark.writeCollectionSerializable           thrpt   30      58673.297 ±     7724.099  ops/s
hazelcast.reference.ReferenceBenchmark.writeCollectionSerializableFilled     thrpt   30      61804.203 ±     6222.601  ops/s
hazelcast.reference.ReferenceBenchmark.writeCollectionSerializableFilled1    thrpt   30      28792.832 ±     2577.027  ops/s
hazelcast.reference.ReferenceBenchmark.writeCollectionSerializableFilled10   thrpt   30      18974.825 ±      700.966  ops/s
hazelcast.reference.ReferenceBenchmark.writeCollectionSerializableFilled100  thrpt   30       4478.097 ±      121.155  ops/s
hazelcast.reference.ReferenceBenchmark.writeCollectionSerializableFilled500  thrpt   30       1007.231 ±       13.468  ops/s
hazelcast.reference.ReferenceBenchmark.writeField15Serializable              thrpt   30        714.622 ±        8.072  ops/s
hazelcast.reference.ReferenceBenchmark.writeParentDataSerializable           thrpt   30       1537.001 ±       24.841  ops/s
hazelcast.reference.ReferenceBenchmark.writeSelfReferencing                  thrpt   30      64343.024 ±     8288.716  ops/s

```
